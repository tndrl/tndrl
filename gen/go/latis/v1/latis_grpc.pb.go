// latis/v1/latis.proto
//
// Core protocol definition for latis.
//
// Design Decisions:
//
// ## Bidirectional Streaming
//
// We use a single bidirectional stream (Connect) rather than multiple
// unary/streaming RPCs because:
//   - Allows multiplexed communication over one connection
//   - Either side can send at any time (true async)
//   - Control messages (cancel, state) can interleave with data
//   - Maps naturally to our protocol model
//
// ## Separate Client/Server Message Types
//
// We use distinct ClientMessage and ServerMessage types because:
//   - Type safety: compiler ensures correct message direction
//   - Clarity: obvious what each side can send
//   - Follows protobuf/gRPC conventions
//   - Simpler handlers: each side only handles relevant message types
//
// ## ID-based Correlation
//
// Every request has an ID, responses reference it. This enables:
//   - Multiple in-flight requests
//   - Out-of-order responses
//   - Cancellation of specific operations

// Code generated by protoc-gen-go-grpc. DO NOT EDIT.
// versions:
// - protoc-gen-go-grpc v1.6.0
// - protoc             (unknown)
// source: latis/v1/latis.proto

package latisv1

import (
	context "context"
	grpc "google.golang.org/grpc"
	codes "google.golang.org/grpc/codes"
	status "google.golang.org/grpc/status"
)

// This is a compile-time assertion to ensure that this generated file
// is compatible with the grpc package it is being compiled against.
// Requires gRPC-Go v1.64.0 or later.
const _ = grpc.SupportPackageIsVersion9

const (
	LatisService_Connect_FullMethodName = "/latis.v1.LatisService/Connect"
)

// LatisServiceClient is the client API for LatisService service.
//
// For semantics around ctx use and closing/ending streaming RPCs, please refer to https://pkg.go.dev/google.golang.org/grpc/?tab=doc#ClientConn.NewStream.
//
// LatisService is the core service for cmdr <-> unit communication.
type LatisServiceClient interface {
	// Connect establishes a bidirectional stream between cmdr and unit.
	// ConnectRequest messages flow from cmdr to unit.
	// ConnectResponse messages flow from unit to cmdr.
	Connect(ctx context.Context, opts ...grpc.CallOption) (grpc.BidiStreamingClient[ConnectRequest, ConnectResponse], error)
}

type latisServiceClient struct {
	cc grpc.ClientConnInterface
}

func NewLatisServiceClient(cc grpc.ClientConnInterface) LatisServiceClient {
	return &latisServiceClient{cc}
}

func (c *latisServiceClient) Connect(ctx context.Context, opts ...grpc.CallOption) (grpc.BidiStreamingClient[ConnectRequest, ConnectResponse], error) {
	cOpts := append([]grpc.CallOption{grpc.StaticMethod()}, opts...)
	stream, err := c.cc.NewStream(ctx, &LatisService_ServiceDesc.Streams[0], LatisService_Connect_FullMethodName, cOpts...)
	if err != nil {
		return nil, err
	}
	x := &grpc.GenericClientStream[ConnectRequest, ConnectResponse]{ClientStream: stream}
	return x, nil
}

// This type alias is provided for backwards compatibility with existing code that references the prior non-generic stream type by name.
type LatisService_ConnectClient = grpc.BidiStreamingClient[ConnectRequest, ConnectResponse]

// LatisServiceServer is the server API for LatisService service.
// All implementations must embed UnimplementedLatisServiceServer
// for forward compatibility.
//
// LatisService is the core service for cmdr <-> unit communication.
type LatisServiceServer interface {
	// Connect establishes a bidirectional stream between cmdr and unit.
	// ConnectRequest messages flow from cmdr to unit.
	// ConnectResponse messages flow from unit to cmdr.
	Connect(grpc.BidiStreamingServer[ConnectRequest, ConnectResponse]) error
	mustEmbedUnimplementedLatisServiceServer()
}

// UnimplementedLatisServiceServer must be embedded to have
// forward compatible implementations.
//
// NOTE: this should be embedded by value instead of pointer to avoid a nil
// pointer dereference when methods are called.
type UnimplementedLatisServiceServer struct{}

func (UnimplementedLatisServiceServer) Connect(grpc.BidiStreamingServer[ConnectRequest, ConnectResponse]) error {
	return status.Error(codes.Unimplemented, "method Connect not implemented")
}
func (UnimplementedLatisServiceServer) mustEmbedUnimplementedLatisServiceServer() {}
func (UnimplementedLatisServiceServer) testEmbeddedByValue()                      {}

// UnsafeLatisServiceServer may be embedded to opt out of forward compatibility for this service.
// Use of this interface is not recommended, as added methods to LatisServiceServer will
// result in compilation errors.
type UnsafeLatisServiceServer interface {
	mustEmbedUnimplementedLatisServiceServer()
}

func RegisterLatisServiceServer(s grpc.ServiceRegistrar, srv LatisServiceServer) {
	// If the following call panics, it indicates UnimplementedLatisServiceServer was
	// embedded by pointer and is nil.  This will cause panics if an
	// unimplemented method is ever invoked, so we test this at initialization
	// time to prevent it from happening at runtime later due to I/O.
	if t, ok := srv.(interface{ testEmbeddedByValue() }); ok {
		t.testEmbeddedByValue()
	}
	s.RegisterService(&LatisService_ServiceDesc, srv)
}

func _LatisService_Connect_Handler(srv interface{}, stream grpc.ServerStream) error {
	return srv.(LatisServiceServer).Connect(&grpc.GenericServerStream[ConnectRequest, ConnectResponse]{ServerStream: stream})
}

// This type alias is provided for backwards compatibility with existing code that references the prior non-generic stream type by name.
type LatisService_ConnectServer = grpc.BidiStreamingServer[ConnectRequest, ConnectResponse]

// LatisService_ServiceDesc is the grpc.ServiceDesc for LatisService service.
// It's only intended for direct use with grpc.RegisterService,
// and not to be introspected or modified (even as a copy)
var LatisService_ServiceDesc = grpc.ServiceDesc{
	ServiceName: "latis.v1.LatisService",
	HandlerType: (*LatisServiceServer)(nil),
	Methods:     []grpc.MethodDesc{},
	Streams: []grpc.StreamDesc{
		{
			StreamName:    "Connect",
			Handler:       _LatisService_Connect_Handler,
			ServerStreams: true,
			ClientStreams: true,
		},
	},
	Metadata: "latis/v1/latis.proto",
}
